#!/usr/bin/env bash
#
# ~/.defaults (macOS)
#
#   Store of macOS' settings hidden behind "defaults" CLI
#
#   These "non-default defaults" configs aren't really here to
#   be used or accessed programatically, but rather just for
#   documentation and reference purposes. I figured I should
#   start writing down all the minor little switches I have, or
#   in the future, will flip here and there so I know what my
#   personal "defaults" are that I've come to expect.
#
#   I guess these are just shell commands and executing this
#   file would just revert back any deviated settings. So I
#   added a bash shebang up top but haven't added +x bit to
#   avoid accidental executions.
#
#   Note: I didn't realize that the concept of this kind of
#   macos specific dotfile was sort of a niche thing until
#   after learning that some folks have been documenting and
#   uncovering a lot of these `defaults` and related swithes
#   embedded in the OS. Credit and thanks to Mathias Bynens
#   from whose dotfiles repo I discovered many of the below
#   tricks and configs (see https://mths.be/macos for ref)!
#
#   Neel Yadav
#   04.08.2022


# ————————————————————————————————————————
# ————— GLOBAL ———————————————————————————
# ————————————————————————————————————————

# Reveal IP address, hostname, OS version, etc. when clicking the clock in login screen
sudo defaults write /Library/Preferences/com.apple.loginwindow AdminHostInfo HostName

# Turn off capitalization autocorrect in all native text editors cuz it's annoying
defaults write -g NSAutomaticCapitalizationEnabled -bool false

# Enable spring-loaded directory opening when hovering dragged file over folder
defaults write -g com.apple.springing.enabled -bool true

# Change delay for directory springing to half the default(?) delay time in seconds
# The value was set to 0.5 as of writing, but I'm not sure if that is the system
# default or I had previously set this, pretty sure it's system default though.
defaults write -g com.apple.springing.delay -float 0.25

# Set system-wide default web search provider
# This config was changed in recent macOS updates it seems (?)
#defaults write -g NSPreferredWebServices -dict NSDefaultDisplayName "Kagi" NSProviderIdentifier "com.kagi"

# ————————————————————————————————————————d
# ————— FINDER ———————————————————————————
# ————————————————————————————————————————

# Show dotfiles
defaults write com.apple.finder AppleShowAllFiles -bool true

# For visible path bar, start from $HOME
defaults write com.apple.finder PathBarRootAtHome -bool true

# Search current folder by default
defaults write com.apple.finder FXDefaultSearchScope -string "SCcf"

# Always use Icon View (icnv) by default in Finder windows
defaults write com.apple.finder FXPreferredViewStyle -string "icnv"


# ————————————————————————————————————————
# ————— SAFARI ———————————————————————————
# ————————————————————————————————————————

# Enable sourcing locally installed fonts (if available) despite fingerprinting risks
# (doesn't seem to do what the name implies...)
defaults write -app Safari "WebKitPreferences.shouldAllowUserInstalledFonts" -bool true

# Prevent Safari from opening ‘safe’ files automatically after downloading
defaults write -app Safari AutoOpenSafeDownloads -bool false

# Enable “Do Not Track”
defaults write -app Safari SendDoNotTrackHTTPHeader -bool true

# Use custom user agent styles
defaults write -app Safari UserStyleSheetEnabled -bool true
defaults write -app Safari UserStyleSheetLocationURLString -string "$HOME/Archive/Web Browser/custom-agent.css"

# Enable developer settings and things
defaults write -app Safari IncludeDevelopMenu -bool true
defaults write -app Safari WebKitDeveloperExtrasEnabledPreferenceKey -bool true
defaults write -app Safari "com.apple.Safari.ContentPageGroupIdentifier.WebKit2DeveloperExtrasEnabled" -bool true

# Access web inspector in non-Safari webkit renderings
defaults write -g WebKitDeveloperExtras -bool true


# ————————————————————————————————————————
# ————— TERMINAL —————————————————————————
# ————————————————————————————————————————

# I use iTerm2 but might as well
defaults write -app Terminal FocusFollowsMouse -bool true


# ————————————————————————————————————————
# ————— TEXT EDIT ————————————————————————
# ————————————————————————————————————————

# Open blank, untitled txt file on start instead of file chooser
defaults write -app TextEdit NSShowAppCentricOpenPanelInsteadOfUntitledFile -bool false

# Default to plain text format rather than rich text
defaults write -app TextEdit RichText -bool false


# ————————————————————————————————————————
# ————— SCRIPT EDITOR ————————————————————
# ————————————————————————————————————————

# Open blank, untitled scpt file on start instead of file chooser
defaults write -app 'Script Editor' NSShowAppCentricOpenPanelInsteadOfUntitledFile -bool false

